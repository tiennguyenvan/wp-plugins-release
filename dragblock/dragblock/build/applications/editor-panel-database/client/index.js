!function(){var e,t={640:function(e,t,l){"use strict";var a=window.wp.i18n,o=window.lodash;const r={author__in:{keyword:"author in",label:(0,a.__)("Author In","dragblock"),type:"users"},author__not_in:{keyword:"author not in",label:(0,a.__)("Author Not In","dragblock"),type:"users"},category__and:{keyword:"category and",label:(0,a.__)("Category And","dragblock"),type:"categories"},category__in:{keyword:"category in",label:(0,a.__)("Categories","dragblock"),type:"categories"},category__not_in:{keyword:"category not in",label:(0,a.__)("Category Not In","dragblock"),type:"categories"},tag__and:{keyword:"tag and",label:(0,a.__)("Tag And"),type:"tags"},tag__in:{keyword:"tag in",label:(0,a.__)("Tags","dragblock"),type:"tags"},tag__not_in:{keyword:"tag not in",label:(0,a.__)("Tags Not In","dragblock"),type:"tags"},post_type:{keyword:"post type",label:(0,a.__)("Post Type","dragblock"),type:"select",options:[{value:"",label:(0,a.__)("Default","dragblock")},{value:"post",label:(0,a.__)("Post","dragblock")},{value:"page",label:(0,a.__)("Page","dragblock")},{value:"attachment",label:(0,a.__)("Attachment","dragblock")},{value:"any",label:(0,a.__)("Any","dragblock")}]},post_status:{keyword:"post status",label:(0,a.__)("Post Status","dragblock"),type:"select",options:[{value:"",label:(0,a.__)("Default","dragblock")},{value:"publish",label:(0,a.__)("Publish","dragblock")},{value:"pending",label:(0,a.__)("Pending","dragblock")},{value:"draft",label:(0,a.__)("Draft","dragblock")},{value:"auto-draft",label:(0,a.__)("Auto Draft","dragblock")},{value:"future",label:(0,a.__)("Future","dragblock")},{value:"private",label:(0,a.__)("Private","dragblock")},{value:"inherit",label:(0,a.__)("Inherit","dragblock")},{value:"trash",label:(0,a.__)("Trash","dragblock")},{value:"any",label:(0,a.__)("Any","dragblock")}]},post_parent__in:{keyword:"post parent",label:(0,a.__)("Parent In","dragblock"),type:"posts"},post_parent__not_in:{keyword:"post parent",label:(0,a.__)("Parent Not In","dragblock"),type:"posts"},post__in:{keyword:"fix certain post",label:(0,a.__)("Post In","dragblock"),type:"posts"},post__not_in:{keyword:"not certain post",label:(0,a.__)("Post Not In","dragblock"),type:"posts"},post_password:{keyword:"post password",label:(0,a.__)("Password","dragblock"),type:"text"},has_password:{keyword:"has password",label:(0,a.__)("Has Password","dragblock"),type:"checkbox"},posts_per_page:{keyword:"posts per page",label:(0,a.__)("Count","dragblock"),type:"number"},paged:{keyword:"paged",label:(0,a.__)("Page Number","dragblock"),type:"number"},ignore_sticky_posts:{keyword:"ignore sticky posts",label:(0,a.__)("Ignore Sticky Posts","dragblock"),type:"checkbox"},ignore_loaded_posts:{keyword:"ignore loaded posts",label:(0,a.__)("Ignore Loaded Posts","dragblock"),type:"checkbox"},order:{keyword:"order",label:(0,a.__)("Order","dragblock"),type:"select",options:[{value:"",label:(0,a.__)("Descending","dragblock")},{value:"ASC",label:(0,a.__)("Ascending","dragblock")}]},orderby:{keyword:"order by",label:(0,a.__)("Order By","dragblock"),type:"select",options:[{value:"",label:(0,a.__)("Default","dragblock")},{value:"ID",label:(0,a.__)("By ID","dragblock")},{value:"author",label:(0,a.__)("By Author","dragblock")},{value:"title",label:(0,a.__)("By Title","dragblock")},{value:"date",label:(0,a.__)("By Published Date","dragblock")},{value:"modified",label:(0,a.__)("By Modified Date","dragblock")},{value:"rand",label:(0,a.__)("By Random","dragblock")},{value:"comment_count",label:(0,a.__)("By Comment Count","dragblock")},{value:"meta_value_num",label:(0,a.__)("By Meta Numeric Value","dragblock")}]},meta_key:{keyword:"meta key",label:(0,a.__)("Meta Key","dragblock"),type:"text"},meta_value:{keyword:"meta value",label:(0,a.__)("Meta Value","dragblock"),type:"text"},query_id:{keyword:"query variable",label:(0,a.__)("Query Variable","dragblock"),type:"query_variable"},item_index:{keyword:"item index number",label:(0,a.__)("Item Index","dragblock"),type:"select",options:[{value:"",label:(0,a.__)("Default","dragblock")},{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"},{value:10,label:"10"},{value:11,label:"11"}]}},n={WP_Query:{keyword:"get post page attachment user comment custom type",label:(0,a.__)("Get Posts","dragblock"),params:["author__in","category__in","tag__in","post_type","posts_per_page","ignore_sticky_posts","ignore_loaded_posts","orderby"]},WP_Query_Default:{keyword:"get default current post page attachment user comment custom type",label:(0,a.__)("Get Default Posts","dragblock"),params:[]},parse_item:{keyword:"parse item",label:(0,a.__)("Parse Item","dragblock"),params:["query_id","item_index"]}};wp.hooks.addFilter("blocks.registerBlockType","dragblock/database-register",(function(e,t){return Object.assign({},e,{attributes:Object.assign({},e.attributes,{dragBlockQueries:{type:"array",default:""},dragBlockPHP:{type:"string",default:""}})})}));var c=window.wp.element,s=l(4184),i=l.n(s),d=window.wp.compose,u=window.wp.blockEditor,p=window.wp.components;function g({children:e,className:t,onClose:l,onAction:r,onMouseLeave:n,onMouseEnter:s,onKeyDown:d,actions:u,title:g,disabled:b,hidden:_,list:k,index:m,position:y}){let f=null;const h=(0,c.useRef)(null);return l||(l=()=>{}),n||(n=()=>{}),s||(s=()=>{}),d||(d=()=>{}),u=Object.assign({},{top:!0,bottom:!0,up:!0,down:!0,duplicate:!0,disable:!0,hidden:!0,delete:!0},u),(0,c.createElement)(c.Fragment,null,(0,c.createElement)(p.Popover,{focusOnMount:!1,position:y||"bottom center",className:"dragblock-property-popover"+(t?" "+t:""),onFocusOutside:()=>{l()},onClose:()=>{l()},onClick:e=>{f={X:e.clientX,Y:e.clientY}},onMouseMove:e=>{f={X:e.clientX,Y:e.clientY}},onMouseLeave:e=>{null!==f&&f.X!==e.clientX&&f.Y!==e.clientY&&n()},onKeyDown:e=>{"Escape"!==e.key&&"Enter"!==e.key||("Enter"!==e.key||-1===e.target.className.indexOf("components-search-control__input")&&-1===e.target.className.indexOf("dragblock-chosen-control-input-showing")&&-1===e.target.className.indexOf("components-select-control__input"))&&l()},ref:h},g?(0,c.createElement)("div",{className:"title"},g):null,e?(0,c.createElement)("div",{className:"content"},e):null,(0,c.createElement)("div",{className:"actions"},u.top?(0,c.createElement)(p.Tooltip,{delay:10,text:(0,a.__)("Move Top","dragblock"),position:"top center"},(0,c.createElement)("a",{className:i()("action front",{disabled:0===m}),onClick:()=>{let e=null;if((0,o.isFunction)(u.top))e=u.top((0,o.cloneDeep)(k),m);else{if(0===m||!Array.isArray(k))return;e=(0,o.cloneDeep)(k);let t=(0,o.cloneDeep)(e[m]);e.splice(m,1),e.unshift(t)}r("top",e)}},(0,c.createElement)("svg",{style:{transform:"rotate(180deg)"},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false"},(0,c.createElement)("path",{d:"M2 12c0 3.6 2.4 5.5 6 5.5h.5V19l3-2.5-3-2.5v2H8c-2.5 0-4.5-1.5-4.5-4s2-4.5 4.5-4.5h3.5V6H8c-3.6 0-6 2.4-6 6zm19.5-1h-8v1.5h8V11zm0 5h-8v1.5h8V16zm0-10h-8v1.5h8V6z"})))):null,u.bottom?(0,c.createElement)(p.Tooltip,{delay:10,text:(0,a.__)("Move Bottom","dragblock"),position:"top center"},(0,c.createElement)("a",{className:i()("action back",{disabled:m===k.length-1}),onClick:()=>{let e=null;if((0,o.isFunction)(u.bottom))e=u.bottom((0,o.cloneDeep)(k),m);else{if(m===k.length-1||!Array.isArray(k))return;e=(0,o.cloneDeep)(k);let t=(0,o.cloneDeep)(e[m]);e.splice(m,1),e.push(t)}r("bottom",e)}},(0,c.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false"},(0,c.createElement)("path",{d:"M2 12c0 3.6 2.4 5.5 6 5.5h.5V19l3-2.5-3-2.5v2H8c-2.5 0-4.5-1.5-4.5-4s2-4.5 4.5-4.5h3.5V6H8c-3.6 0-6 2.4-6 6zm19.5-1h-8v1.5h8V11zm0 5h-8v1.5h8V16zm0-10h-8v1.5h8V6z"})))):null,u.up?(0,c.createElement)(p.Tooltip,{delay:10,text:(0,a.__)("Move Up","dragblock"),position:"top center"},(0,c.createElement)("a",{className:i()("action up",{disabled:0===m}),onClick:()=>{let e=null;if((0,o.isFunction)(u.up))e=u.up((0,o.cloneDeep)(k),m);else{if(0===m||!Array.isArray(k))return;e=(0,o.cloneDeep)(k);let t=(0,o.cloneDeep)(e[m]);e[m]=e[m-1],e[m-1]=t}r("up",e)}},(0,c.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"},(0,c.createElement)("path",{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})))):null,u.down?(0,c.createElement)(p.Tooltip,{delay:10,text:(0,a.__)("Move Down","dragblock"),position:"top center"},(0,c.createElement)("a",{className:i()("action down",{disabled:m===k.length-1}),onClick:()=>{let e=null;if((0,o.isFunction)(u.down))e=u.down((0,o.cloneDeep)(k),m);else{if(m===k.length-1||!Array.isArray(k))return;e=(0,o.cloneDeep)(k);let t=(0,o.cloneDeep)(e[m]);e[m]=e[m+1],e[m+1]=t}r("down",e)}},(0,c.createElement)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"},(0,c.createElement)("path",{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})))):null,u.duplicate?(0,c.createElement)(p.Tooltip,{delay:10,text:(0,a.__)("Duplicate","dragblock"),position:"top center"},(0,c.createElement)("a",{className:"action duplicate",onClick:()=>{let e=null;if((0,o.isFunction)(u.duplicate))e=u.duplicate((0,o.cloneDeep)(k),m);else{if(!Array.isArray(k))return;e=(0,o.cloneDeep)(k),e.splice(m,0,(0,o.cloneDeep)(e[m]))}r("duplicate",e)}},(0,c.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false"},(0,c.createElement)("path",{d:"M7 13.8h6v-1.5H7v1.5zM18 16V4c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2zM5.5 16V4c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5zM7 10.5h8V9H7v1.5zm0-3.3h8V5.8H7v1.4zM20.2 6v13c0 .7-.6 1.2-1.2 1.2H8v1.5h11c1.5 0 2.7-1.2 2.7-2.8V6h-1.5z"})))):null,u.disable?(0,c.createElement)(p.Tooltip,{delay:10,text:b?(0,a.__)("Enable","dragblock"):(0,a.__)("Disable","dragblock"),position:"top center"},(0,c.createElement)("a",{className:i()("action visibility",{disabled:!!b}),onClick:()=>{let e=null;if((0,o.isFunction)(u.disable))e=u.disable((0,o.cloneDeep)(k),m);else{if(!Array.isArray(k))return;e=(0,o.cloneDeep)(k)}r("disable",e)}},b?dragBlockIcons?.iconCircle:dragBlockIcons?.iconMinusCircle)):null,u.hidden?(0,c.createElement)(p.Tooltip,{delay:10,text:"*"===_?(0,a.__)("Show","dragblock"):(0,a.__)("Hide","dragblock"),position:"top center"},(0,c.createElement)("a",{className:"action",onClick:()=>{let e=null;if((0,o.isFunction)(u.hidden))e=u.hidden((0,o.cloneDeep)(k),m);else{if(!Array.isArray(k))return;e=(0,o.cloneDeep)(k)}r("hidden",e)}},"*"===_?dragBlockIcons?.iconEye:dragBlockIcons?.iconEyeClosed)):null,u.delete?(0,c.createElement)(p.Tooltip,{delay:10,text:(0,a.__)("Delete","dragblock"),position:"top center"},(0,c.createElement)("a",{className:"action delete",onClick:()=>{let e=null;(0,o.isFunction)(u.delete)?e=u.delete((0,o.cloneDeep)(k),m):(e=(0,o.cloneDeep)(k),(0,o.isArray)(k)?e.splice(m,1):"object"==typeof k&&delete e[m]),r("delete",e)}},(0,c.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false"},(0,c.createElement)("path",{d:"M20 5h-5.7c0-1.3-1-2.3-2.3-2.3S9.7 3.7 9.7 5H4v2h1.5v.3l1.7 11.1c.1 1 1 1.7 2 1.7h5.7c1 0 1.8-.7 2-1.7l1.7-11.1V7H20V5zm-3.2 2l-1.7 11.1c0 .1-.1.2-.3.2H9.1c-.1 0-.3-.1-.3-.2L7.2 7h9.6z"})))):null,u.custom&&(0,c.createElement)(c.Fragment,null,Object.keys(u.custom).map(((e,t)=>(0,c.createElement)("span",{key:t},u.custom[e])))),(0,c.createElement)(p.Tooltip,{delay:10,text:(0,a.__)("Close","dragblock"),position:"top center"},(0,c.createElement)("a",{className:"action close",onClick:l},(0,c.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false"},(0,c.createElement)("path",{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"})))))))}const b=(e,t)=>{window["dragblock-query-objects"]||(window["dragblock-query-objects"]=new Object),window["dragblock-query-objects"][e]||(window["dragblock-query-objects"][e]=new Object);for(let l of t)l&&l.id&&(window["dragblock-query-objects"][e][l.id]=l)},_=(e,t)=>(window["dragblock-query-objects"]||(window["dragblock-query-objects"]=new Object),window["dragblock-query-objects"][e]||(window["dragblock-query-objects"][e]=new Object),window["dragblock-query-objects"][e][t]?window["dragblock-query-objects"][e][t]:(k(e,[t]),null)),k=(e="categories",t)=>{if(!t||0===t.length)return;window["dragblock-query-loaded-ids"]||(window["dragblock-query-loaded-ids"]={}),window["dragblock-query-loaded-ids"][e]||(window["dragblock-query-loaded-ids"][e]=new Set);let l=!1,a=[];for(let o of t)window["dragblock-query-loaded-ids"][e].has(o)||(l=!0,window["dragblock-query-loaded-ids"][e].add(o),a.push(o));l&&wp.apiFetch({path:`/wp/v2/${e}?include=${a.join(",")}`}).then((t=>{b(e,t)}))};function m(e,t=function(){},l=!1){if(0!==e&&!e)return!1;let a="";if((0,o.isObject)(e)&&e.responseText&&e.statusText&&(a=e.statusText,e=e.responseText),(0,o.isString)(e)&&-1!==e.indexOf(" https://wordpress.org/documentation/article/faq-troubleshooting/"))return t(__("WordPress Server Error","sneeit-core")),!1;if(function(e){if(!(0,o.isString)(e))return!1;if(-1===e.indexOf("on line")||-1===e.indexOf(".php")||-1===e.indexOf(": "))return!1;let t=["Parse error","Warning","Notice","Fatal error"];for(let l of t)if(-1!==e.indexOf(l))return!0;return!1}(e))return t(a+" : "+(e=(e=e.split(": ")[1]).split("Stack trace:")[0])),!1;if(l)return t((0,o.isString)(e)?e:JSON.stringify(e)),!1;try{e=JSON.parse(e)}catch(l){return t("Invalid JSON: "+l+": "+e),!1}return e&&e.error?(t(e.error),!1):e}function y({placeholder:e,onSelect:t,className:l,popOverClassName:o,icon:r,label:n,text:s,showTrigger:d,position:u,toolbarButton:g,suggestions:_}){const[k,m]=(0,c.useState)(0),[y,f]=(0,c.useState)(""),[h,w]=(0,c.useState)({}),[v,B]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[x,N]=(0,c.useState)([]),[q,I]=(0,c.useState)(null),[C,O]=(0,c.useState)(!1),j=()=>{B(!1)},P=()=>{let e={};for(let t in _){if(Object.keys(e).length>12)break;e[t]=_[t]}w(e),B(!0)},S=e=>{t(e),w({}),f(""),j()};let A=null,T="";if(_){if("string"==typeof _){if(T=_,_={},x&&x.length)for(let e of x)_[e.value]={label:e.label,note:e.note};switch(T){case"categories":_["[dragblock.post.cat.id]"]={label:(0,a.__)("Post Category ID"),note:(0,a.__)("Current Post Category ID")};break;case"tags":_["[dragblock.post.tag.id]"]={label:(0,a.__)("Post Tag ID"),note:(0,a.__)("Current Post Tag ID")};break;case"authors":_["[dragblock.post.author.id]"]={label:(0,a.__)("Post Author ID"),note:(0,a.__)("Current Post Author ID")}}}}else _={};const M=e=>{if(!e||!_||0===_.length)return void w({});let t=e.toLowerCase().trim().replace(/-/gi," ").split(" ").map((e=>e.trim())),l=t.join("").replace(/ /gi,""),a={},o=0;for(let e in _){let r="string"==typeof _[e]?_[e].toLowerCase():Object.values(_[e]).join(" ").toLowerCase(),n=!0;if(-1===r.replace(/ /gi,"").replace(/-/gi,"").indexOf(l))for(let e of t)if(-1===r.indexOf(e)){n=!1;break}if(n&&(a[e]=_[e],++o>=12))break}w(Object.fromEntries(Object.entries(a).sort(((e,t)=>e[0].length-t[0].length))))};return(0,c.createElement)("div",{className:i()("dragblock-autocomplete-search-box"+(l?" "+l:""),{"show-trigger":d})},g?(0,c.createElement)(p.ToolbarButton,{icon:r,iconSize:"24",label:n,className:"fake-search-button",variant:"secondary",onClick:()=>{C?O(!1):P()}}):(0,c.createElement)(p.Button,{icon:r,iconSize:"24",label:n,className:"fake-search-button",variant:"secondary",onClick:()=>{C?O(!1):P()}},s||(r?"":e)),v?(0,c.createElement)(p.Popover,{position:u||"bottom center",onFocusOutside:()=>{j()},onMouseMove:e=>{null!==A||(A={X:e.clientX,Y:e.clientY})},onClose:()=>{j()},onMouseLeave:e=>{null!==A&&A.X!==e.clientX&&A.Y!==e.clientY&&j()},className:i()("dragblock-autocomplete-search-box-popover"+(o?" "+o:""),{"show-trigger":d})},(0,c.createElement)(p.SearchControl,{onKeyDown:e=>{if("ArrowUp"===e.key)m(0===k?Object.keys(h).length-1:k-1);else if("ArrowDown"===e.key)k>=Object.keys(h).length-1?m(0):m(k+1);else if("Enter"===e.key){let e=Object.keys(h);if(k<0||e.length-1<k)return;let t=e[k];S(t),O(!0),j()}},placeholder:e,value:y,onChange:e=>{T?(E(!0),w([]),q&&clearTimeout(q),I(setTimeout((()=>{((e,t)=>{if(!e||!t)return void N([]);const l=new URLSearchParams({search:e,per_page:12,_locale:"users"});wp.apiFetch({path:`/wp/v2/${t}?${l.toString()}`}).then((l=>{N(l.map((e=>({label:e.name,value:e.id,note:e.description})))),l.map((e=>{_[e.id]={label:e.name,note:e.description}})),b(t,l),M(e),E(!1)})).catch((e=>{E(!1),N([])}))})(e,T)}),1e3))):M(e),f(e)}}),T&&y&&(0,c.createElement)("div",{className:"results"},!0===D?(0,c.createElement)(c.Fragment,null,(0,a.__)("Fetching...","dragblock")):(0,c.createElement)(c.Fragment,null,0===Object.keys(_).length&&(0,c.createElement)(c.Fragment,null,(0,a.__)("Not found any","dragblock")))),0!==Object.entries(h).length&&(0,c.createElement)("div",{className:"results"},Object.entries(h).map((([e,t],l)=>{let a=e,o=e;return"string"==typeof t?o=t:(t.note?a=t.note:t.label&&(a=t.label),t.label&&(o=t.label)),(0,c.createElement)("div",{key:l,className:"item",onMouseEnter:()=>{m(l)}},(0,c.createElement)("a",{className:i()("item-link",{active:k===l}),onClick:()=>{S(e)}},(0,c.createElement)("code",null,o)))})))):null)}window.wp.data;const f=e=>{const{value:t,type:l,onSelect:r}=e;let n=(0,a.__)("Add an item","dragblock");switch(l){case"categories":n=(0,a.__)("Add a Category","dragblock");break;case"authors":n=(0,a.__)("Add an Author","dragblock");break;case"tags":n=(0,a.__)("Add a Tag","dragblock");break;case"posts":n=(0,a.__)("Add a Post","dragblock");break;default:const e=(0,o.capitalize)(l.replaceAll(dragBlockEditorInit.startTaxQueryKey,"").split("_").join(" "));n=(0,a.__)("Add a {0}","dragblock").replace("{0}",e)}let s=t?t.split(","):[],i={};return s.map((e=>{let t=_(l,e);t&&t.name?i[e]=t.name:-1!==e.indexOf("[dragblock.")?i[e]=(0,a.__)("Current Item","dragblock"):i[e]=(0,a.__)("Fetching ...","dragblock")})),(0,c.createElement)("div",{className:"dragblock-query-object-controls "+l},s.length>0&&(0,c.createElement)("div",{className:"object"},s.map(((e,t)=>(0,c.createElement)("div",{className:"name",key:t},e," : ",i[e],(0,c.createElement)("a",{className:"delete",onClick:()=>{let t=new Set(s);t.delete(e),r(Array.from(t).join(","))}},(0,c.createElement)(p.Tooltip,{text:(0,a.__)("Delete","dragblock"),delay:10,position:"middle right"},(0,c.createElement)("span",null,dragBlockIcons?.iconTrash))))))),(0,c.createElement)(y,{placeholder:n,onSelect:e=>{s.includes(e)||(s.push(e),r(s.join(",")))},suggestions:l}))};var h=new Object;const w=(0,d.createHigherOrderComponent)((e=>t=>{const{attributes:l,setAttributes:s,clientId:d,isSelected:b,isMultiSelected:m}=t;let{dragBlockClientId:w,dragBlockQueries:v,dragBlockAttrs:B,className:D,anchor:E}=l;const[x,N]=(0,c.useState)(-1),[q,I]=(0,c.useState)([x,-1]),[C,O]=(0,c.useState)(!!v&&!!v.length);if(dragBlockEditorInit.taxonomies)for(const e of dragBlockEditorInit.taxonomies){const t=dragBlockEditorInit.startTaxQueryKey+e+"__in";r[t]||(r[t]={keyword:e.split("_"),label:e.split("_").map((e=>(0,o.capitalize)(e))).join(" "),type:dragBlockEditorInit.startTaxQueryKey+e},n.WP_Query.params.includes(t)||n.WP_Query.params.push(t))}dragBlockEditorInit.postTypes&&(new Set(["post","page","attachment","revision","nav_menu_item","custom_css","customize_changeset","oembed_cache","user_request","wp_block","wp_template","wp_template_part","wp_global_styles","wp_navigation","dragblockformmsg","patterns_ai_data"]),dragBlockEditorInit.postTypes.forEach((e=>{}))),(0,c.useEffect)((()=>{if(window["dragblock-query-ids"]&&Object.keys(window["dragblock-query-ids"]).length>0)for(let e in window["dragblock-query-ids"])k(e,window["dragblock-query-ids"][e])})),v||(v=[]);for(let e of v){let{name:t,id:l}=e;t&&(h[l]=t)}const j=["authors","categories","tags","posts"];window["dragblock-query-ids"]||(window["dragblock-query-ids"]={});for(let e of v)if(e.params)for(let t of e.params){let e=r[t.slug].type;(j.includes(e)||t.slug.startsWith(dragBlockEditorInit.startTaxQueryKey))&&(window["dragblock-query-ids"][e]||(window["dragblock-query-ids"][e]=new Set),t.value.split(",").map((t=>{isNaN(t)||window["dragblock-query-ids"][e].add(t)})))}const P=(e,t,l)=>{let a=(0,o.cloneDeep)(v);a[e].params[t].value=l,s({dragBlockQueries:a})};return function(e,t=!0){const{clientId:l,isSelected:a,isMultiSelected:o,name:r,attributes:n}=e,{dragBlockRenderability:c}=n;return!a||o||["core/block"].includes(r)||t&&function(e){if(e&&e.length)for(let t of e)if(!t.disabled&&"render"===t.slug&&"never"===t.value)return!0;return!1}(c)}(t)?(0,c.createElement)(c.Fragment,null,(0,c.createElement)(e,{...t})):(0,c.createElement)(c.Fragment,null,(0,c.createElement)(e,{...t}),(0,c.createElement)(u.InspectorControls,null,(0,c.createElement)(p.PanelBody,{className:"dragblock-inspector-controls database"+(v&&v.length?" has-properties":""),title:(0,a.__)("Database","dragblock"),icon:dragBlockIcons?.iconPostHeart,opened:C,onToggle:()=>{O(!C)}},v&&v.length?null:(0,c.createElement)(y,{placeholder:(0,a.__)("+ Add a Query/Function","dragblock"),onSelect:e=>{let t=(0,o.cloneDeep)(v),l={slug:e,name:"",id:w+"__"+d,params:[]};"WP_Query"===e&&(l.params=[{slug:"category__in",value:""}]),t.unshift(l),s({dragBlockQueries:(0,o.cloneDeep)(t)})},suggestions:n}),!!v&&!!v.length&&(0,c.createElement)("div",{className:"properties queries"},v.map(((e,t)=>{const{slug:l,name:d,id:u,params:b,disabled:k}=e;let m=new Object;if(b){let e=new Set(b.map((e=>e.slug)));for(let t of n[l].params)e.has(t)||r[t]&&(m[t]=r[t])}const[w,B]=q;return(0,c.createElement)("div",{className:i()("query",{active:""!==k}),key:t},((e,t)=>{const{slug:l,name:r,id:s,params:i,disabled:d}=e;let u=n[l].label;return(0,c.createElement)("a",{className:"title",onClick:()=>{N(t)}},!!r&&(0,c.createElement)("span",{className:"variable"},"$",r.replaceAll(" ","_")," = "),(0,c.createElement)("span",{className:"keyword"},(0,o.capitalize)(u))," ","WP_Query"===l&&(0,a.__)("from","dragblock"))})(e,t),(0,c.createElement)("div",{className:"query-params"},b&&b.length>0&&b.map(((e,l)=>(0,c.createElement)("div",{key:l},((e,t,l)=>{const{slug:o,value:n,disabled:s}=t;let i=r[o].type,d=(j.includes(i)||i.startsWith(dragBlockEditorInit.startTaxQueryKey))&&n,u={};if(d){let e=n.split(",");e.map((e=>{let t=_(i,e);null!==t&&(u[e]=t)})),Object.keys(u).length<e.length&&(d=!1)}return(0,c.createElement)("a",{key:l,className:"param"+(d?"":" default"),onClick:()=>{I([e,l])}},(0,c.createElement)("span",{className:"slug keyword"},r[o].label),":",d?(0,c.createElement)(c.Fragment,null,(0,c.createElement)("span",{className:"value"},Object.entries(u).map((([e,t],l)=>(0,c.createElement)("span",{className:"object",key:l},0!==l&&(0,c.createElement)(c.Fragment,null,", "),(0,c.createElement)("span",{className:"name"}," ",t.name)))))):(0,c.createElement)(c.Fragment,null,(0,c.createElement)("span",{className:"value"}," ",("query_variable"===r[o].type&&h[n]?"$"+h[n]:n)||(0,a.__)("default","dragblock"))))})(t,e,l),w===t&&B===l&&((e,t,l)=>{const{slug:n,value:i,disabled:d}=t;return(0,c.createElement)(g,{className:"dragblock-database-param-control-popover",onClose:()=>{I([e,-1])},onMouseLeave:()=>{I([e,-1])},actions:{hidden:!1},onAction:(t,a)=>{"disable"===t&&(a[e].params[l].disabled?delete a[e].params[l].disabled:a[e].params[l].disabled="*");let r=(0,o.cloneDeep)(v);r[e].params=a,I([e,-1]),s({dragBlockQueries:r})},disabled:d,list:v[e].params,index:l,title:r[t.slug].label},(0,c.createElement)(c.Fragment,null,((e,t,l)=>{const{slug:o,value:n,disabled:s}=t;let i=[];return"query_variable"===r[o].type&&(i=Object.entries(h).map((([e,t])=>({value:e,label:"$"+t}))),i.unshift({value:"",label:(0,a.__)("Default","dragblock")})),(0,c.createElement)(c.Fragment,null,(j.includes(r[o].type)||r[o].type.startsWith(dragBlockEditorInit.startTaxQueryKey))&&(0,c.createElement)(f,{type:r[o].type,value:n,onSearch:()=>{setIsSearchingQuery(!0)},onClose:()=>{setIsSearchingQuery(!1)},onSelect:t=>{P(e,l,t)}}),"text"===r[o].type&&(0,c.createElement)(p.TextControl,{value:n,onChange:t=>{P(e,l,t)}}),"number"===r[o].type&&(0,c.createElement)(p.__experimentalNumberControl,{value:n,onChange:t=>{P(e,l,t)}}),"checkbox"===r[o].type&&(0,c.createElement)(p.CheckboxControl,{checked:!!n,onChange:()=>{P(e,l,n?"":"true")}}),"select"===r[o].type&&(0,c.createElement)(p.SelectControl,{value:n,onChange:t=>{P(e,l,t)},options:r[o].options}),"query_variable"===r[o].type&&(0,c.createElement)(c.Fragment,null,(0,c.createElement)(p.SelectControl,{value:n,onChange:t=>{P(e,l,t)},options:i})))})(e,t,l)))})(t,e,l)))),Object.keys(m).length>0&&"parse_item"!==l&&((e,t)=>(0,c.createElement)(y,{className:"len-"+(v[e]&&v[e].params?v[e].params.length:0),placeholder:(0,a.__)("+ Add Filter","dragblock"),onSelect:t=>{let l=(0,o.cloneDeep)(v);l[e].params.unshift({slug:t,value:""}),s({dragBlockQueries:l}),I([e,0])},suggestions:t}))(t,m)),x===t&&((e,t)=>{const{slug:l,name:a,id:o,params:r,disabled:n}=e;return(0,c.createElement)(g,{className:"dragblock-database-query-control-popover",onClose:()=>{N(-1)},onMouseLeave:()=>{N(-1)},onKeyDown:e=>{"Escape"!==e.key&&"Enter"!==e.key||N(-1)},actions:{top:!1,bottom:!1,up:!1,down:!1,hidden:!1,duplicate:!1,delete:function(e,t){return delete h[e[t].id],e.splice(t,1),e}},onAction:(e,l)=>{"disable"===e&&(l[t].disabled?delete l[t].disabled:l[t].disabled="*"),N(-1),s({dragBlockQueries:l})},disabled:n,list:v,index:t})})(e,t))}))))))}),"dragBlockDatabaseControls");wp.hooks.addFilter("editor.BlockEdit","dragblock/database-controls",w),window._DragBlockDB={queries:{},posts:{},queryBlocks:{},parseItemBlocks:{},contentBlocks:{},curQueryId:null,curParseId:null,post:null,renderPool:{},renderId:0};const v=(0,d.createHigherOrderComponent)((e=>t=>{const{attributes:l,setAttributes:a,name:o,clientId:r}=t,{dragBlockQueries:n,dragBlockClientId:s,className:i}=l,[d,u]=(0,c.useState)("");let p=!1,g=!1;if(_DragBlockDB.renderPool[s]||(_DragBlockDB.renderPool[s]=u),n&&n.length)for(let e of n){let{slug:t,params:l,disabled:a}=e;if(a)continue;if(g=!0,"parse_item"===t){if(_DragBlockDB.curParseId=s,_DragBlockDB.parseItemBlocks[s]||!_DragBlockDB.queryBlocks[_DragBlockDB.curQueryId])continue;let e=_DragBlockDB.queryBlocks[_DragBlockDB.curQueryId],t=e.childIds.indexOf(s);-1===t&&(t=e.childIds.length,e.childIds.push(s));continue}_DragBlockDB.curQueryId=s,l||(l=[]);let o={};for(let e of l){const{slug:t,value:l,disabled:a}=e;a||0!==l&&!l||(o[t]=t.includes("__")?l.split(",").map((e=>Number(e.trim()))):isNaN(l)?l:Number(l))}let r=JSON.stringify(o);_DragBlockDB.queryBlocks[s]?_DragBlockDB.queryBlocks[s].queryKey!=r&&(_DragBlockDB.queryBlocks[s].queryKey=r,p=!0):_DragBlockDB.queryBlocks[s]={queryKey:r,childIds:[]},_DragBlockDB.queries[r]||null===_DragBlockDB.queries[r]||(p=!1,g=!0,_DragBlockDB.queries[r]=null)}return(0,c.useEffect)((()=>{if(g)if(p)B(s,_DragBlockDB.renderId++);else for(let e in _DragBlockDB.queries)_DragBlockDB.queries[e]||(_DragBlockDB.queries[e]=[],jQuery.post(dragBlockEditorInit.ajaxUrl,{action:"dragblock_database_loader",data:e,nonce:dragBlockEditorInit.nonce}).fail((function(e){})).done((function(t){if(!1===(t=m(t)))return;const l=t.map((e=>(_DragBlockDB.posts[e.id]=e,e.id)));_DragBlockDB.queries[e]=l;for(let t in _DragBlockDB.queryBlocks)_DragBlockDB.queryBlocks[t].queryKey===e&&B(t,_DragBlockDB.renderId++)})))})),(0,c.createElement)(e,{...t})}),"dragBlockDatabaseLoader");function B(e,t){if(!_DragBlockDB.queryBlocks[e])return;const l=_DragBlockDB.queryBlocks[e].queryKey;_DragBlockDB.queries[l]&&(_DragBlockDB.queryBlocks[e].childIds.map(((e,a)=>{if(_DragBlockDB.queries[l][a]){_DragBlockDB.parseItemBlocks[e]=_DragBlockDB.queries[l][a];for(let l in _DragBlockDB.contentBlocks)_DragBlockDB.contentBlocks[l]===e&&_DragBlockDB.renderPool[l]&&_DragBlockDB.renderPool[l](t);_DragBlockDB.renderPool[e]&&_DragBlockDB.renderPool[e](t)}})),_DragBlockDB.renderPool[e]&&_DragBlockDB.renderPool[e](t))}wp.hooks.addFilter("editor.BlockEdit","dragblock/database-loader",v)},4184:function(e,t){var l;!function(){"use strict";var a={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var l=arguments[t];if(l){var r=typeof l;if("string"===r||"number"===r)e.push(l);else if(Array.isArray(l)){if(l.length){var n=o.apply(null,l);n&&e.push(n)}}else if("object"===r){if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]")){e.push(l.toString());continue}for(var c in l)a.call(l,c)&&l[c]&&e.push(c)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(l=function(){return o}.apply(t,[]))||(e.exports=l)}()}},l={};function a(e){var o=l[e];if(void 0!==o)return o.exports;var r=l[e]={exports:{}};return t[e](r,r.exports,a),r.exports}a.m=t,e=[],a.O=function(t,l,o,r){if(!l){var n=1/0;for(d=0;d<e.length;d++){l=e[d][0],o=e[d][1],r=e[d][2];for(var c=!0,s=0;s<l.length;s++)(!1&r||n>=r)&&Object.keys(a.O).every((function(e){return a.O[e](l[s])}))?l.splice(s--,1):(c=!1,r<n&&(n=r));if(c){e.splice(d--,1);var i=o();void 0!==i&&(t=i)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[l,o,r]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={2409:0,2492:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,r,n=l[0],c=l[1],s=l[2],i=0;if(n.some((function(t){return 0!==e[t]}))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(s)var d=s(a)}for(t&&t(l);i<n.length;i++)r=n[i],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},l=self.webpackChunkdragblock=self.webpackChunkdragblock||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var o=a.O(void 0,[2492],(function(){return a(640)}));o=a.O(o)}();