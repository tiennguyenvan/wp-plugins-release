!function(){"use strict";var e,t,n,a,l={7047:function(e,t,n){function a(e,t,n){let a;Object.defineProperty(e,t,{get:()=>a||(a=n(),a),enumerable:!0})}n.d(t,{Z:function(){return a}})},2592:function(e,t,n){n.d(t,{x:function(){return l}});var a=n(3478);class l extends a.j{constructor(e,t,n){const{parser:l,start:r}=super(new a._(e,t,n)),o={enumerable:!1,get:()=>l};Object.defineProperty(this,"p",o);const i={enumerable:!1,get:()=>r};Object.defineProperty(this,"tableStart",i)}}},3478:function(e,t,n){n.d(t,{_:function(){return l},j:function(){return r}});const a=new Date("1904-01-01T00:00:00+0000").getTime();class l{constructor(e,t,n){this.name=(n||e.tag||"").trim(),this.length=e.length,this.start=e.offset,this.offset=0,this.data=t,["getInt8","getUint8","getInt16","getUint16","getInt32","getUint32","getBigInt64","getBigUint64"].forEach((e=>{let t=e.replace(/get(Big)?/,"").toLowerCase(),n=parseInt(e.replace(/[^\d]/g,""))/8;Object.defineProperty(this,t,{get:()=>this.getValue(e,n)})}))}get currentPosition(){return this.start+this.offset}set currentPosition(e){this.start=e,this.offset=0}skip(e=0,t=8){this.offset+=e*t/8}getValue(e,t){let n=this.start+this.offset;this.offset+=t;try{return this.data[e](n)}catch(n){throw console.error("parser",e,t,this),console.error("parser",this.start,this.offset),n}}flags(e){if(8===e||16===e||32===e||64===e)return this[`uint${e}`].toString(2).padStart(e,0).split("").map((e=>"1"===e));console.error("Error parsing flags: flag types can only be 1, 2, 4, or 8 bytes long"),console.trace()}get tag(){const e=this.uint32;return t=[e>>24&255,e>>16&255,e>>8&255,255&e],Array.from(t).map((e=>String.fromCharCode(e))).join("");var t}get fixed(){return this.int16+Math.round(1e3*this.uint16/65356)/1e3}get legacyFixed(){let e=this.uint16,t=this.uint16.toString(16).padStart(4,0);return parseFloat(`${e}.${t}`)}get uint24(){return(this.uint8<<16)+(this.uint8<<8)+this.uint8}get uint128(){let e=0;for(let t=0;t<5;t++){let t=this.uint8;if(e=128*e+(127&t),t<128)break}return e}get longdatetime(){return new Date(a+1e3*parseInt(this.int64.toString()))}get fword(){return this.int16}get ufword(){return this.uint16}get Offset16(){return this.uint16}get Offset32(){return this.uint32}get F2DOT14(){const e=p.uint16;return[0,1,-2,-1][e>>14]+(16383&e)/16384}verifyLength(){this.offset!=this.length&&console.error(`unexpected parsed table size (${this.offset}) for "${this.name}" (expected ${this.length})`)}readBytes(e=0,t=0,n=8,a=!1){if(0===(e=e||this.length))return[];t&&(this.currentPosition=t);const l=`${a?"":"u"}int${n}`,r=[];for(;e--;)r.push(this[l]);return r}}class r{constructor(e){const t={enumerable:!1,get:()=>e};Object.defineProperty(this,"parser",t);const n=e.currentPosition,a={enumerable:!1,get:()=>n};Object.defineProperty(this,"start",a)}load(e){Object.keys(e).forEach((t=>{let n=Object.getOwnPropertyDescriptor(e,t);n.get?this[t]=n.get.bind(this):void 0!==n.value&&(this[t]=n.value)})),this.parser.length&&this.parser.verifyLength()}}}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return l[e](n,n.exports,o),n.exports}o.m=l,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},o.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"==typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"==typeof n.then)return n}var l=Object.create(null);o.r(l);var r={};e=e||[null,t({}),t([]),t(t)];for(var i=2&a&&n;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((function(e){r[e]=function(){return n[e]}}));return r.default=function(){return n},o.d(l,r),l},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))},o.u=function(e){return e+".js"},o.miniCssF=function(e){},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n={},a="dragblock:",o.l=function(e,t,l,r){if(n[e])n[e].push(t);else{var i,s;if(void 0!==l)for(var c=document.getElementsByTagName("script"),m=0;m<c.length;m++){var u=c[m];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==a+l){i=u;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.setAttribute("data-webpack",a+l),i.src=e),n[e]=[t];var f=function(t,a){i.onerror=i.onload=null,clearTimeout(d);var l=n[e];if(delete n[e],i.parentNode&&i.parentNode.removeChild(i),l&&l.forEach((function(e){return e(a)})),t)return t(a)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),s&&document.head.appendChild(i)}},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&!e;)e=n[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e+"../../../"}(),function(){var e={3525:0};o.f.j=function(t,n){var a=o.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else{var l=new Promise((function(n,l){a=e[t]=[n,l]}));n.push(a[2]=l);var r=o.p+o.u(t),i=new Error;o.l(r,(function(n){if(o.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var l=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+l+": "+r+")",i.name="ChunkLoadError",i.type=l,i.request=r,a[1](i)}}),"chunk-"+t,t)}};var t=function(t,n){var a,l,r=n[0],i=n[1],s=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);s&&s(o)}for(t&&t(n);c<r.length;c++)l=r[c],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0},n=self.webpackChunkdragblock=self.webpackChunkdragblock||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),function(){var e=window.wp.element,t=window.wp.i18n,n=window.wp.components;const a=(0,t.__)("The quick brown fox jumps over the lazy dog.","dragblock"),l=(0,t.__)("Incredible as it may seem, I believe that the Aleph of Garay Street was a false Aleph.","dragblock"),r=(0,t.__)("First a glass of pseudo-cognac, he ordered, and then down you dive into the cellar. Let me warn you, you'll have to lie flat on your back. Total darkness, total immobility, and a certain ocular adjustment will also be necessary. From the floor, you must focus your eyes on the nineteenth step. Once I leave you, I'll lower the trapdoor and you'll be quite alone. You needn't fear the rodents very much though I know you will. In a minute or two, you'll see the Aleph, the microcosm of the alchemists and Kabbalists, our true proverbial friend, the multum in parvo!","dragblock"),i="sentence",s={heading:{text:a,size:30,lineHeight:1.1,margin:"0.5em 0",component:"h2"},sentence:{text:l,size:20,lineHeight:1.3,margin:"0.5em 0",component:"p"},paragraph:{text:r,size:16,lineHeight:1.5,margin:"0.5em 0",component:"p"}},c=(0,e.createContext)();function m({children:t}){const[n,a]=(0,e.useState)(localStorage.getItem("cbt_default-demo-type")||i),[l,r]=(0,e.useState)(localStorage.getItem("cbt_default-demo-text")||s[n].text),[o,m]=(0,e.useState)(parseInt(localStorage.getItem("cbt_default-demo-font-size"))||s[n].size),[u,f]=(0,e.useState)({}),d=e=>{r(e),localStorage.setItem("cbt_default-demo-text",e)},h=e=>{m(e),localStorage.setItem("cbt_default-demo-font-size",e)},g=e=>{d(s[e||n].text),h(s[e||n].size)},[p,y]=(0,e.useState)(JSON.parse(localStorage.getItem("cbt_families-open"))||[]);return(0,e.createElement)(c.Provider,{value:{demoText:l,handleDemoTextChange:d,resetDefaults:g,demoType:n,handleDemoTypeChange:e=>{a(e),localStorage.setItem("cbt_default-demo-type",e),g(e)},demoFontSize:o,handleDemoFontSizeChange:h,familiesOpen:p,handleToggleFamily:e=>{let t=[];t=p.includes(e)?p.filter((t=>t!==e)):[...p,e],y(t),localStorage.setItem("cbt_families-open",JSON.stringify(t))},axes:u,handleAxesChange:(e,t)=>{f({...u,[e]:{...u[e],currentValue:t}})}}},t)}var u=function({style:t}){const{demoText:n,demoType:a,demoFontSize:l}=(0,e.useContext)(c),r=s[a].component,o={...t,fontSize:`${l}px`,lineHeight:s[a].lineHeight,margin:s[a].margin};return(0,e.createElement)("div",null,(0,e.createElement)(r,{style:o},n))};const{__:__}=wp.i18n;var f=function({face:t,deleteFont:a,shouldBeRemoved:l,isFamilyOpen:r}){const o={fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight?String(t.fontWeight).split(" ")[0]:"normal",...t.fontVariationSettings?{fontVariationSettings:t.fontVariationSettings}:{}};return l?null:(0,e.createElement)("tr",{className:"font-face"},(0,e.createElement)("td",null,t.fontStyle),(0,e.createElement)("td",null,t.fontWeight),(0,e.createElement)("td",{className:"demo-cell"},(0,e.createElement)(u,{style:o})),a&&(0,e.createElement)("td",null,(0,e.createElement)(n.Button,{variant:"tertiary",onClick:a,tabIndex:r?0:-1},__("Remove","dragblock"))))};const{__:d,_n:_n}=wp.i18n;var h=function({fontFamily:t,deleteFont:a}){const{familiesOpen:l,handleToggleFamily:r}=(0,e.useContext)(c),o=l.includes(t.name)||l.includes(t.fontFamily),i=()=>{r(t.name||t.fontFamily)};if(t.shouldBeRemoved)return null;const s=!!t.fontFace&&!!t.fontFace.length;return(0,e.createElement)("table",{className:"wp-list-table widefat table-view-list"},(0,e.createElement)("thead",{onClick:i},(0,e.createElement)("tr",null,(0,e.createElement)("td",{className:"font-family-head"},(0,e.createElement)("div",null,(0,e.createElement)("strong",null,t.name||t.fontFamily),(0,e.createElement)("span",null,"   "),(0,e.createElement)("span",{style:{fontFamily:t.name||t.fontFamily,fontSize:"20px",textTransform:"uppercase"}},(0,e.createElement)("span",{style:{textTransform:"uppercase"}},t.name||t.fontFamily),(0,e.createElement)("span",null," "),(0,e.createElement)("span",{style:{textTransform:"lowercase"}},t.name||t.fontFamily)),s&&(0,e.createElement)("span",{className:"variants-count"}," ","( ",t.fontFace.length," ",_n("Variant","Variants",t.fontFace.length,"dragblock")," ",")")),(0,e.createElement)("div",null,(0,e.createElement)(n.Button,{variant:"tertiary",onClick:e=>{e.stopPropagation(),a(t.name||t.fontFamily)}},d("Remove Font Family","dragblock")),(0,e.createElement)(n.Button,{onClick:i},(0,e.createElement)(n.Icon,{icon:o?"arrow-up-alt2":"arrow-down-alt2"})))))),(0,e.createElement)("tbody",{className:"font-family-contents"},(0,e.createElement)("tr",{className:"container"},(0,e.createElement)("td",{className:" slide "+(o?"open":"close")},(0,e.createElement)("table",{className:"wp-list-table widefat striped table-view-list"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("td",null,d("Style","dragblock")),(0,e.createElement)("td",null,d("Weight","dragblock")),(0,e.createElement)("td",{className:"preview-head"},d("Preview","dragblock")),s&&(0,e.createElement)("td",null))),(0,e.createElement)("tbody",null,s&&t.fontFace.map(((n,l)=>n.shouldBeRemoved?null:(0,e.createElement)(f,{face:n,key:`fontface${l}`,deleteFont:()=>a(t.name||t.fontFamily,n.fontWeight,n.fontStyle),isFamilyOpen:o}))),!s&&t.fontFamily&&(0,e.createElement)(f,{face:t,isFamilyOpen:o})))))))},g=window.wp.primitives,p=(0,e.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{d:"m11.3 17.2-5-5c-.1-.1-.1-.3 0-.4l2.3-2.3-1.1-1-2.3 2.3c-.7.7-.7 1.8 0 2.5l5 5H7.5v1.5h5.3v-5.2h-1.5v2.6zm7.5-6.4-5-5h2.7V4.2h-5.2v5.2h1.5V6.8l5 5c.1.1.1.3 0 .4l-2.3 2.3 1.1 1.1 2.3-2.3c.6-.7.6-1.9-.1-2.5z"})),y=function({axis:a,setAxisCurrentValue:l}){return(0,e.createElement)("div",null,(0,e.createElement)(n.RangeControl,{label:a.tag+" "+(0,t.__)("font axis:","dragblock"),name:`font-axis-${a.tag}`,id:`font-axis-${a.tag}`,min:parseInt(a.minValue),max:parseInt(a.maxValue),value:parseInt(a.currentValue),onChange:e=>{l(a.tag,e)},step:1}))},b=function({axes:t,setAxes:n}){const a=(e,a)=>{n({...t,[e]:{...t[e],currentValue:a}})};return(0,e.createElement)(e.Fragment,null,t&&Object.keys(t).length&&(0,e.createElement)(e.Fragment,null,Object.keys(t).map((n=>(0,e.createElement)(y,{axis:t[n],key:`axis-range-${n}`,setAxisCurrentValue:a})))))},E=function({axes:a,setAxes:l,resetAxes:r}){const{demoText:o,handleDemoTextChange:i,demoType:s,handleDemoTypeChange:m,demoFontSize:u,handleDemoFontSizeChange:f,resetDefaults:d}=(0,e.useContext)(c);return(0,e.createElement)("div",{className:"demo-text-input"},(0,e.createElement)("div",{className:"container"},(0,e.createElement)("div",{className:"controls"},(0,e.createElement)("div",{className:"standard-controls"},(0,e.createElement)(n.SelectControl,{label:(0,t.__)("Preview type","dragblock"),onChange:m,value:s},(0,e.createElement)("option",{value:"heading"},(0,t.__)("Heading","dragblock")),(0,e.createElement)("option",{value:"sentence"},(0,t.__)("Sentence","dragblock")),(0,e.createElement)("option",{value:"paragraph"},(0,t.__)("Paragraph","dragblock"))),(0,e.createElement)(n.__experimentalInputControl,{label:"Demo text",value:o,onChange:i}),(0,e.createElement)("div",null,(0,e.createElement)(n.RangeControl,{label:(0,t.__)("Font size (px)","dragblock"),value:u,onChange:f,min:8,max:140,withInputField:!0}))),!!a&&!!Object.keys(a).length&&(0,e.createElement)("div",{className:"extra-controls"},(0,e.createElement)(b,{axes:a,setAxes:l}))),(0,e.createElement)("div",null,(0,e.createElement)(n.Button,{variant:"secondary",icon:p,onClick:()=>{d("sentence"),m("sentence"),r()}},(0,t.__)("Reset","dragblock")))))},v=function(t){return(0,e.createElement)("div",{className:"fonts-page-layout"},t.children)},w=function({isOpen:a,onClose:l}){return a?(0,e.createElement)(n.Modal,{title:(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.Icon,{icon:"info"})," ",(0,t.__)("Info","dragblock")),onRequestClose:l},(0,e.createElement)("p",null,(0,t.__)("You can find the definition of embeded font families in the theme.json file of your theme.","dragblock")),(0,e.createElement)("p",null,(0,t.__)("If your theme.json makes reference to fonts providers other than local they may not be displayed correctly.","dragblock"))):null};function F(e){return e.includes("italic")?"italic":"normal"}function _(e){return"regular"===e||"italic"===e?"400":e.replace("italic","")}function k(e){return e.replace("http://","https://")}function S(e){const t=["Bytes","KB","MB","GB","TB"];if(0===e)return"n/a";const n=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return 0===n?e+" "+t[n]:(e/Math.pow(1024,n)).toFixed(1)+" "+t[n]}var x=(0,e.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{d:"M20 5h-5.7c0-1.3-1-2.3-2.3-2.3S9.7 3.7 9.7 5H4v2h1.5v.3l1.7 11.1c.1 1 1 1.7 2 1.7h5.7c1 0 1.8-.7 2-1.7l1.7-11.1V7H20V5zm-3.2 2l-1.7 11.1c0 .1-.1.2-.3.2H9.1c-.1 0-.3-.1-.3-.2L7.2 7h9.6z"})),O=function({title:a,fontsOutline:l,handleDeleteFontFace:r,handleDeleteFontFamily:o}){const[i,s]=(0,e.useState)({}),c=Object.keys(l).map((e=>l[e].faces.map((t=>({family:e,weight:t.weight,style:t.style,src:t.src}))))).flat();(0,e.useEffect)((()=>{const e=c.map((e=>fetch(e.src,{method:"HEAD"})));Promise.all(e).then((e=>{const t={};e.forEach((e=>{t[e.url]=e.headers.get("content-length")})),s(t)}))}),[l]);const m=Object.keys(l).reduce(((e,t)=>e+l[t].faces.length),0),u=S(c.reduce(((e,t)=>e+parseInt(i[t.src])),0));return(0,e.createElement)("div",{className:"sidebar"},(0,e.createElement)("div",{className:"sidebar-container"},(0,e.createElement)("div",{className:"variants-outline"},(0,e.createElement)("h2",null,a),(0,e.createElement)("h3",null,l.family),!!l&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"variants-list"},(0,e.createElement)("div",{className:"content"},Object.keys(l).map(((a,s)=>(0,e.createElement)("div",{className:"variants-family",key:`variants-family-${s}`},(0,e.createElement)("div",{className:"header"},(0,e.createElement)("span",{className:"name"},l[a].family," "),(0,e.createElement)("div",null,(0,e.createElement)("span",{className:"variants"},!!l[a].faces.length&&(0,e.createElement)(e.Fragment,null,"("," ",l[a].faces.length," ",(0,t._n)("Variant","Variants",l[a].faces.length,"dragblock")," ",")")),(0,e.createElement)(n.Button,{icon:x,iconSize:15,isSmall:!0,onClick:()=>o(l[a].family)}))),l[a].faces.map(((t,o)=>{return(0,e.createElement)("div",{className:"variant-row",key:`selected-variant-${o}`},(0,e.createElement)("div",{className:"variant"},t.weight," ",t.style),(0,e.createElement)("div",{className:"size"},(s=t.src,i[s]?S(i[s]):null)),(0,e.createElement)("div",null,(0,e.createElement)(n.Button,{onClick:()=>r(l[a].family,t.weight,t.style),icon:x,iconSize:15,isSmall:!0})));var s})))))))),(0,e.createElement)("div",{className:"variants-total"},(0,e.createElement)("div",{className:"variant"},m," ",(0,t._n)("Variant","Variants",m,"dragblock")),(0,e.createElement)("div",{className:"size"},u)))))},C=function({toggleIsHelpOpen:a}){const{adminUrl:l}=dragBlockFontLib;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"manage-fonts-header-flex"},(0,e.createElement)("h1",{className:"wp-heading-inline"},(0,t.__)("Font Library","dragblock")),(0,e.createElement)("div",{className:"buttons"},(0,e.createElement)(n.Button,{href:`${l}admin.php?page=dragblock-add-google-fonts`,variant:"secondary"},(0,t.__)("Add Google Font","dragblock")),(0,e.createElement)(n.Button,{href:`${l}admin.php?page=dragblock-add-local-fonts`,variant:"secondary"},(0,t.__)("Add Local Font","dragblock")))),(0,e.createElement)("hr",{className:"wp-header-end"}),(0,e.createElement)("p",{className:"help"},(0,t.__)("There may be some fonts currently embedded in your theme","dragblock"),(0,e.createElement)(n.Button,{onClick:a,style:{padding:"0",height:"1rem"}},(0,e.createElement)(n.Icon,{icon:"info"}))))},T=function({isOpen:a,onConfirm:l,onCancel:r,fontToDelete:o}){const i=(0,t.sprintf)(
// translators: %1$s: Font Style, %2$s: Font Weight, %3$s: Font Family
(0,t.__)('Are you sure you want to delete "%1$s - %2$s" variant of "%3$s" from the DragBlock\'s font library?',"dragblock"),o?.weight,o?.style,o?.fontFamily),s=(0,t.sprintf)(
// translators: %s: Font Family
(0,t.__)('Are you sure you want to delete "%s" from the DragBlock\'s font library?',"dragblock"),o?.fontFamily);return(0,e.createElement)(n.__experimentalConfirmDialog,{isOpen:a,onConfirm:l,onCancel:r},void 0!==o?.weight&&void 0!==o.style?(0,e.createElement)("h3",null,i):(0,e.createElement)("h3",null,s),(0,e.createElement)("p",null,(0,t.__)("This action will delete the font definition and the font file assets from the DragBlock's font library","dragblock")))},N=function(){const n=document.querySelector("#nonce").value,a=document.querySelector("#dragblock-font-library-json"),l=document.querySelector("#manage-fonts-form"),r=a.innerHTML,o=JSON.parse(r)||[],[i,s]=(0,e.useState)(o),[c,m]=(0,e.useState)({fontFamily:void 0,weight:void 0,style:void 0}),[u,f]=(0,e.useState)(!1),[d,g]=(0,e.useState)(!1);(0,e.useEffect)((()=>{void 0!==c.fontFamily&&l.submit()}),[i]);const p=()=>{g(!d)};function y(e,t,n){m({fontFamily:e,weight:t,style:n},f(!0))}const b=i.reduce(((e,t)=>(e[t.fontFamily]={family:t.name||t.fontFamily,faces:(t.fontFace||[]).map((e=>{return{weight:e.fontWeight,style:e.fontStyle,src:(t=e.src[0],t?t.replace("file:./",dragBlockFontLib.uploadUrl+"/"):t)};var t}))},e)),{});return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(w,{isOpen:d,onClose:p}),(0,e.createElement)(v,null,(0,e.createElement)("main",null,(0,e.createElement)(C,{toggleIsHelpOpen:p}),(0,e.createElement)(T,{isOpen:u,onConfirm:function(){f(!1),void 0!==c.weight&&void 0!==c.style?function(){const{fontFamily:e,weight:t,style:n}=c,a=i.reduce(((a,l)=>{const{fontFace:r=[],...o}=l;return e===l.fontFamily&&1===r.filter((e=>!e.shouldBeRemoved)).length&&(o.shouldBeRemoved=!0),o.fontFace=r.map((a=>t!==a.fontWeight||n!==a.fontStyle||e!==l.fontFamily&&e!==l.name?a:{...a,shouldBeRemoved:!0})),[...a,o]}),[]);s(a)}(c.fontFamily,c.weight,c.style):function(e){const t=i.map((t=>e===t.fontFamily||e===t.name?{...t,shouldBeRemoved:!0}:t));s(t)}(c.fontFamily)},onCancel:function(){m({}),f(!1)},fontToDelete:c}),(0,e.createElement)(E,null),0===i.length?(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,(0,t.__)("There are no font families installed in DragBlock's font library.","dragblock"))):(0,e.createElement)("div",{className:"font-families"},i.map(((t,n)=>(0,e.createElement)(h,{fontFamily:t,key:`fontfamily${n}`,deleteFont:y})))),(0,e.createElement)("form",{method:"POST",id:"manage-fonts-form"},(0,e.createElement)("input",{type:"hidden",name:"dragblock-font-library-new-font-json",value:JSON.stringify(i)}),(0,e.createElement)("input",{type:"hidden",name:"nonce",value:n}))),(0,e.createElement)(O,{title:(0,t.__)("Font Library","dragblock"),fontsOutline:b,handleDeleteFontFace:y,handleDeleteFontFamily:y})))},B=(window.wp.data,window.wp.coreData);let L=globalThis.fetch;if(!L){let e=[];L=globalThis.fetch=(...t)=>new Promise(((n,a)=>{e.push({args:t,resolve:n,reject:a})})),o.e(5083).then(o.t.bind(o,5083,19)).then((t=>{for(L=globalThis.fetch=async function(e){return new Promise(((n,a)=>{t.readFile(e,((e,t)=>{if(e)return a(e);n({ok:!0,arrayBuffer:()=>t.buffer})}))}))};e.length;){let t=e.shift();L(...t.args).then((e=>t.resolve(e))).catch((e=>t.reject(e)))}})).catch((e=>{throw console.error(e),new Error("lib-font cannot run unless either the Fetch API or Node's filesystem module is available.")}))}class D{constructor(e,t={},n){this.type=e,this.detail=t,this.msg=n,Object.defineProperty(this,"__mayPropagate",{enumerable:!1,writable:!0}),this.__mayPropagate=!0}preventDefault(){}stopPropagation(){this.__mayPropagate=!1}valueOf(){return this}toString(){return this.msg?`[${this.type} event]: ${this.msg}`:`[${this.type} event]`}}class V{constructor(){this.listeners={}}addEventListener(e,t,n){let a=this.listeners[e]||[];n?a.unshift(t):a.push(t),this.listeners[e]=a}removeEventListener(e,t){let n=this.listeners[e]||[],a=n.findIndex((e=>e===t));a>-1&&(n.splice(a,1),this.listeners[e]=n)}dispatch(e){let t=this.listeners[e.type];if(t)for(let n=0,a=t.length;n<a&&e.__mayPropagate;n++)t[n](e)}}var j=o(2592),$=o(7047);class P extends j.x{constructor(e,t,n){const{p:a}=super({offset:0,length:12},t,"sfnt");this.version=a.uint32,this.numTables=a.uint16,this.searchRange=a.uint16,this.entrySelector=a.uint16,this.rangeShift=a.uint16,a.verifyLength(),this.directory=[...new Array(this.numTables)].map((e=>new I(a))),this.tables={},this.directory.forEach((e=>{(0,$.Z)(this.tables,e.tag.trim(),(()=>n(this.tables,{tag:e.tag,offset:e.offset,length:e.length},t)))}))}}class I{constructor(e){this.tag=e.tag,this.checksum=e.uint32,this.offset=e.uint32,this.length=e.uint32}}const A=globalThis.pako?globalThis.pako.inflate:void 0;let z;A||o.e(952).then(o.t.bind(o,952,19)).then((e=>{z=t=>e.unzipSync(t)}));class R extends j.x{constructor(e,t,n){const{p:a}=super({offset:0,length:44},t,"woff");this.signature=a.tag,this.flavor=a.uint32,this.length=a.uint32,this.numTables=a.uint16,a.uint16,this.totalSfntSize=a.uint32,this.majorVersion=a.uint16,this.minorVersion=a.uint16,this.metaOffset=a.uint32,this.metaLength=a.uint32,this.metaOrigLength=a.uint32,this.privOffset=a.uint32,this.privLength=a.uint32,a.verifyLength(),this.directory=[...new Array(this.numTables)].map((e=>new U(a))),G(this,t,n)}}class U{constructor(e){this.tag=e.tag,this.offset=e.uint32,this.compLength=e.uint32,this.origLength=e.uint32,this.origChecksum=e.uint32}}function G(e,t,n){e.tables={},e.directory.forEach((a=>{(0,$.Z)(e.tables,a.tag.trim(),(()=>{let l=0,r=t;if(a.compLength!==a.origLength){const e=t.buffer.slice(a.offset,a.offset+a.compLength);let n;if(A)n=A(new Uint8Array(e));else{if(!z){const e="no brotli decoder available to decode WOFF2 font";throw font.onerror&&font.onerror(e),new Error(e)}n=z(new Uint8Array(e))}r=new DataView(n.buffer)}else l=a.offset;return n(e.tables,{tag:a.tag,offset:l,length:a.origLength},r)}))}))}const W=globalThis.unbrotli;let H;W||o.e(952).then(o.t.bind(o,952,19)).then((e=>{H=t=>e.brotliDecompressSync(t)}));class M extends j.x{constructor(e,t,n){const{p:a}=super({offset:0,length:48},t,"woff2");this.signature=a.tag,this.flavor=a.uint32,this.length=a.uint32,this.numTables=a.uint16,a.uint16,this.totalSfntSize=a.uint32,this.totalCompressedSize=a.uint32,this.majorVersion=a.uint16,this.minorVersion=a.uint16,this.metaOffset=a.uint32,this.metaLength=a.uint32,this.metaOrigLength=a.uint32,this.privOffset=a.uint32,this.privLength=a.uint32,a.verifyLength(),this.directory=[...new Array(this.numTables)].map((e=>new q(a)));let l,r=a.currentPosition;this.directory[0].offset=0,this.directory.forEach(((e,t)=>{let n=this.directory[t+1];n&&(n.offset=e.offset+(void 0!==e.transformLength?e.transformLength:e.origLength))}));let o=t.buffer.slice(r);if(W)l=W(new Uint8Array(o));else{if(!H){const t="no brotli decoder available to decode WOFF2 font";throw e.onerror&&e.onerror(t),new Error(t)}l=new Uint8Array(H(o))}!function(e,t,n){e.tables={},e.directory.forEach((a=>{(0,$.Z)(e.tables,a.tag.trim(),(()=>{const l=a.offset,r=l+(a.transformLength?a.transformLength:a.origLength),o=new DataView(t.slice(l,r).buffer);try{return n(e.tables,{tag:a.tag,offset:0,length:a.origLength},o)}catch(e){console.error(e)}}))}))}(this,l,n)}}class q{constructor(e){this.flags=e.uint8;const t=this.tagNumber=63&this.flags;this.tag=63===t?e.tag:["cmap","head","hhea","hmtx","maxp","name","OS/2","post","cvt ","fpgm","glyf","loca","prep","CFF ","VORG","EBDT","EBLC","gasp","hdmx","kern","LTSH","PCLT","VDMX","vhea","vmtx","BASE","GDEF","GPOS","GSUB","EBSC","JSTF","MATH","CBDT","CBLC","COLR","CPAL","SVG ","sbix","acnt","avar","bdat","bloc","bsln","cvar","fdsc","feat","fmtx","fvar","gvar","hsty","just","lcar","mort","morx","opbd","prop","trak","Zapf","Silf","Glat","Gloc","Feat","Sill"][63&t];let n=0!=(this.transformVersion=(192&this.flags)>>6);"glyf"!==this.tag&&"loca"!==this.tag||(n=3!==this.transformVersion),this.origLength=e.uint128,n&&(this.transformLength=e.uint128)}}const J={};let Z=!1;function K(e,t,n){let a=t.tag.replace(/[^\w\d]/g,""),l=J[a];return l?new l(t,n,e):(console.warn(`lib-font has no definition for ${a}. The table was skipped.`),{})}function Y(){let e=0;function t(n,a){if(!Z)return e>10?a(new Error("loading took too long")):(e++,setTimeout((()=>t(n)),250));n(K)}return new Promise(((e,n)=>t(e)))}Promise.all([o.e(3915).then(o.bind(o,3915)),o.e(612).then(o.bind(o,612)),o.e(4162).then(o.bind(o,4162)),o.e(3590).then(o.bind(o,3590)),o.e(6543).then(o.bind(o,6543)),o.e(9132).then(o.bind(o,9132)),o.e(2196).then(o.bind(o,2196)),o.e(9154).then(o.bind(o,9154)),o.e(1701).then(o.bind(o,1701)),o.e(6356).then(o.bind(o,6356)),Promise.all([o.e(197),o.e(2800)]).then(o.bind(o,2800)),Promise.all([o.e(197),o.e(4169)]).then(o.bind(o,4169)),o.e(3768).then(o.bind(o,3768)),o.e(5538).then(o.bind(o,5538)),o.e(8469).then(o.bind(o,8469)),o.e(8633).then(o.bind(o,8633)),o.e(3073).then(o.bind(o,3073)),o.e(2131).then(o.bind(o,2131)),o.e(2233).then(o.bind(o,2233)),o.e(2906).then(o.bind(o,2906)),o.e(5959).then(o.bind(o,5959)),o.e(4685).then(o.bind(o,4685)),o.e(5694).then(o.bind(o,5694)),o.e(8509).then(o.bind(o,8509)),o.e(7234).then(o.bind(o,7234)),o.e(9729).then(o.bind(o,9729)),o.e(9665).then(o.bind(o,9665)),o.e(6176).then(o.bind(o,6176)),o.e(6312).then(o.bind(o,6312)),o.e(68).then(o.bind(o,68)),o.e(6376).then(o.bind(o,6376)),o.e(7905).then(o.bind(o,7905)),o.e(2618).then(o.bind(o,2618)),o.e(9209).then(o.bind(o,9209)),o.e(5422).then(o.bind(o,5422)),o.e(5257).then(o.bind(o,5257)),o.e(9122).then(o.bind(o,9122)),o.e(5330).then(o.bind(o,5330)),o.e(4521).then(o.bind(o,4521)),o.e(2497).then(o.bind(o,2497)),o.e(6506).then(o.bind(o,6506))]).then((e=>{e.forEach((e=>{let t=Object.keys(e)[0];J[t]=e[t]})),Z=!0}));const X=[0,1,0,0],Q=[79,84,84,79],ee=[119,79,70,70],te=[119,79,70,50];function ne(e,t){if(e.length===t.length){for(let n=0;n<e.length;n++)if(e[n]!==t[n])return;return!0}}class ae extends V{constructor(e,t={}){super(),this.name=e,this.options=t,this.metrics=!1}get src(){return this.__src}set src(e){this.__src=e,(async()=>{globalThis.document&&!this.options.skipStyleSheet&&await async function(e,t,n={}){if(!globalThis.document)return;let a=function(e,t){let n=e.lastIndexOf("."),a=(e.substring(n+1)||"").toLowerCase(),l={ttf:"truetype",otf:"opentype",woff:"woff",woff2:"woff2"}[a];if(l)return l;let r={eot:"The .eot format is not supported: it died in January 12, 2016, when Microsoft retired all versions of IE that didn't already support WOFF.",svg:"The .svg format is not supported: SVG fonts (not to be confused with OpenType with embedded SVG) were so bad we took the entire fonts chapter out of the SVG specification again.",fon:"The .fon format is not supported: this is an ancient Windows bitmap font format.",ttc:"Based on the current CSS specification, font collections are not (yet?) supported."}[a];if(r||(r=`${e} is not a known webfont format.`),t)throw new Error(r);console.warn(`Could not load font: ${r}`)}(t,n.errorOnStyle);if(!a)return;let l=document.createElement("style");l.className="injected-by-Font-js";let r=[];return n.styleRules&&(r=Object.entries(n.styleRules).map((([e,t])=>`${e}: ${t};`))),l.textContent=`\n@font-face {\n    font-family: "${e}";\n    ${r.join("\n\t")}\n    src: url("${t}") format("${a}");\n}`,globalThis.document.head.appendChild(l),l}(this.name,e,this.options),this.loadFont(e)})()}async loadFont(e,t){fetch(e).then((e=>function(e){if(!e.ok)throw new Error(`HTTP ${e.status} - ${e.statusText}`);return e}(e)&&e.arrayBuffer())).then((n=>this.fromDataBuffer(n,t||e))).catch((n=>{const a=new D("error",n,`Failed to load font at ${t||e}`);this.dispatch(a),this.onerror&&this.onerror(a)}))}async fromDataBuffer(e,t){this.fontData=new DataView(e);let n=function(e){const t=[e.getUint8(0),e.getUint8(1),e.getUint8(2),e.getUint8(3)];return ne(t,X)||ne(t,Q)?"SFNT":ne(t,ee)?"WOFF":ne(t,te)?"WOFF2":void 0}(this.fontData);if(!n)throw new Error(`${t} is either an unsupported font format, or not a font at all.`);await this.parseBasicData(n);const a=new D("load",{font:this});this.dispatch(a),this.onload&&this.onload(a)}async parseBasicData(e){return Y().then((t=>("SFNT"===e&&(this.opentype=new P(this,this.fontData,t)),"WOFF"===e&&(this.opentype=new R(this,this.fontData,t)),"WOFF2"===e&&(this.opentype=new M(this,this.fontData,t)),this.opentype)))}getGlyphId(e){return this.opentype.tables.cmap.getGlyphId(e)}reverse(e){return this.opentype.tables.cmap.reverse(e)}supports(e){return 0!==this.getGlyphId(e)}supportsVariation(e){return!1!==this.opentype.tables.cmap.supportsVariation(e)}measureText(e,t=16){if(this.__unloaded)throw new Error("Cannot measure text: font was unloaded. Please reload before calling measureText()");let n=document.createElement("div");n.textContent=e,n.style.fontFamily=this.name,n.style.fontSize=`${t}px`,n.style.color="transparent",n.style.background="transparent",n.style.top="0",n.style.left="0",n.style.position="absolute",document.body.appendChild(n);let a=n.getBoundingClientRect();document.body.removeChild(n);const l=this.opentype.tables["OS/2"];return a.fontSize=t,a.ascender=l.sTypoAscender,a.descender=l.sTypoDescender,a}unload(){if(this.styleElement.parentNode){this.styleElement.parentNode.removeElement(this.styleElement);const e=new D("unload",{font:this});this.dispatch(e),this.onunload&&this.onunload(e)}this._unloaded=!0}load(){if(this.__unloaded){delete this.__unloaded,document.head.appendChild(this.styleElement);const e=new D("load",{font:this});this.dispatch(e),this.onload&&this.onload(e)}}}globalThis.Font=ae;var le=function({font:t,variant:n,isSelected:a,handleToggle:l}){const r=n.includes("italic")?"italic":"normal",o="regular"===n||"italic"===n?"400":n.replace("italic",""),i=t.files[n].replace("http://","https://"),s={fontFamily:t.family,fontStyle:r,fontWeight:o};(0,e.useEffect)((()=>{new FontFace(t.family,`url( ${i} )`,{style:r,weight:o}).load().then((function(e){document.fonts.add(e)})).catch((function(e){console.error(e)}))}),[t,n]);const c=`${t.family.toLowerCase().replace(" ","-")}-${n}`;return(0,e.createElement)("tr",null,(0,e.createElement)("td",{className:""},(0,e.createElement)("input",{type:"checkbox",name:"google-font-variant",id:c,value:n,checked:a,onChange:l})),(0,e.createElement)("td",{className:""},(0,e.createElement)("label",{htmlFor:c},o)),(0,e.createElement)("td",{className:""},(0,e.createElement)("label",{htmlFor:c},r)),(0,e.createElement)("td",{className:"demo-cell"},(0,e.createElement)("label",{htmlFor:c},(0,e.createElement)(u,{style:s}))))},re=(0,e.createElement)(g.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(g.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})),oe=function(){const{adminUrl:a,fontLibSlug:l}=dragBlockFontLib;return(0,e.createElement)(n.Button,{varint:"secondary",icon:re,href:`${a}admin.php?page=${l}`,iconSize:20,style:{padding:"0",height:"1.5rem",minWidth:"1.5rem",marginLeft:"-.5rem"},"aria-label":(0,t.__)("Back to manage fonts","dragblock")})};const ie={};var se=function(){const[a,l]=(0,e.useState)({}),[r,o]=(0,e.useState)(null),[i,s]=(0,e.useState)({}),[c,m]=(0,e.useState)(ie),u=document.querySelector("#nonce").value,f=e=>{const t=c[e];if(t&&t?.faces?.length){const{[e]:t,...n}=c;m(n)}else{const t={family:e,faces:r.variants.map((e=>({weight:_(e),style:F(e),src:k(r.files[e])})))};m({...c,[e]:t})}},d=(e,t,n)=>{const a=c[e];return!!a&&!!a.faces.find((e=>e.weight===t&&e.style===n))},h=(e,t,n)=>{d(e,t,n)?((e,t,n)=>{const a=c[e],l=a.faces.filter((e=>!(e.weight===t&&e.style===n)));if(l.length)m({...c,[e]:{...a,faces:l}});else{const{[e]:t,...n}=c;m(n)}})(e,t,n):((e,t,n)=>{const a=c[e],l=function(e,t){return"400"===t?"italic"===e?"italic":"regular":"normal"===e?t:t+e}(n,t);m(a?{...c,[e]:{...a,faces:[...a?.faces||[],{weight:t,style:n,src:k(r.files[l])}]}}:{...c,[e]:{family:e,faces:[{weight:t,style:n,src:k(r.files[l])}]}})})(e,t,n)};(0,e.useEffect)((()=>{(async()=>{const e=await fetch(dragBlockFontLib.googleFontsDataUrl),t=await e.json();l(t)})()}),[]),select(B.store).getCurrentTheme();let g="";return r&&(g=r.family.toLowerCase().replace(" ","-")),(0,e.createElement)(v,null,(0,e.createElement)("main",null,(0,e.createElement)("header",null,(0,e.createElement)(oe,null),(0,e.createElement)("h1",{className:"wp-heading-inline"},(0,t.__)("Add Google fonts","dragblock")),(0,e.createElement)("p",null,(0,t.__)("Add Google fonts assets and font face definitions to the DragBlock's font library","dragblock")," ")),!a?.items&&(0,e.createElement)("p",null,(0,e.createElement)(n.Spinner,null),(0,e.createElement)("span",null,(0,t.__)("Loading Google fonts data…","dragblock"))),a?.items&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"select-font"},(0,e.createElement)(n.SelectControl,{label:(0,t.__)("Select Font","dragblock"),name:"google-font",onChange:e=>{o(a.items[e]),(e=>{const t=new ae(e.family);let n=!1,a=Object.values(e.files)[0];if(a.includes("http://")&&(a=a.replace("http://","https://")),t.src=a,t.onerror=e=>{console.error(e),n=!0},!n){function l(e){const t=e.detail.font,{name:n}=t.opentype.tables,a={copyright:n.get(0),source:n.get(11),license:n.get(13),licenseURL:n.get(14)};s(a)}t.onload=e=>l(e)}})(a.items[e])},size:"__unstable-large"},(0,e.createElement)("option",{value:null},(0,t.__)("Select a font…","dragblock")),a.items.map(((t,n)=>(0,e.createElement)("option",{value:n,key:`option${n}`},t.family))))),(0,e.createElement)(E,null),r&&(0,e.createElement)("p",null,(0,t.__)("Select the font variants you want to include:","dragblock")),r&&(0,e.createElement)("table",{className:"wp-list-table widefat striped table-view-list",id:"google-fonts-table"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("td",{className:""},(0,e.createElement)("input",{type:"checkbox",id:`select-all-${g}`,onChange:()=>f(r.family),checked:r.variants.length===c[r.family]?.faces?.length})),(0,e.createElement)("td",{className:""},(0,e.createElement)("label",{htmlFor:`select-all-${g}`},(0,t.__)("Weight","dragblock"))),(0,e.createElement)("td",{className:""},(0,e.createElement)("label",{htmlFor:`select-all-${g}`},(0,t.__)("Style","dragblock"))),(0,e.createElement)("td",{className:""},(0,e.createElement)("label",{htmlFor:`select-all-${g}`},(0,t.__)("Preview","dragblock"))))),(0,e.createElement)("tbody",null,r.variants.map(((t,n)=>(0,e.createElement)(le,{font:r,variant:t,key:`font-variant-${n}`,isSelected:d(r.family,_(t),F(t)),handleToggle:()=>h(r.family,_(t),F(t))}))))),(0,e.createElement)("form",{encType:"multipart/form-data",action:"",method:"POST"},(0,e.createElement)("input",{type:"hidden",name:"selection-data",value:JSON.stringify(Object.values(c))}),(0,e.createElement)("input",{type:"hidden",name:"font-credits",value:JSON.stringify(i)}),(0,e.createElement)(n.Button,{variant:"primary",type:"submit",disabled:0===Object.values(c).length},(0,t.__)("Add Google fonts","dragblock")),(0,e.createElement)("input",{type:"hidden",name:"nonce",value:u})))),(0,e.createElement)(O,{title:(0,t.__)("Selected Variants","dragblock"),fontsOutline:c,handleDeleteFontFace:h,handleDeleteFontFamily:f}))};function ce(e){return e&&Object.keys(e).length?Object.keys(e).map((t=>`'${e[t].tag}' ${e[t].currentValue}`)).join(", "):""}var me=function({formData:a,setFormData:l,resetFormData:r,isFormValid:o,setAxes:i}){const s=document.querySelector("#nonce").value,c=ce(a.axes);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("form",{method:"POST",id:"font-upload-form",action:"",encType:"multipart/form-data"},(0,e.createElement)("input",{type:"hidden",name:"nonce",value:s}),(0,e.createElement)("div",{className:"form-group"},(0,e.createElement)("label",{htmlFor:"font-file"},(0,t.__)("Font file:","dragblock")),(0,e.createElement)("input",{type:"file",name:"font-file",id:"font-file",onChange:e=>{const t=e.target.files[0];if(!t)return void r();const n=new FileReader;n.readAsArrayBuffer(t),n.onload=()=>{const e=new ae("Uploaded Font");e.fromDataBuffer(n.result,t.name),e.onload=e=>{const n=e.detail.font,{name:a}=n.opentype.tables,r=a.get(1),o=a.get(2).toLowerCase().includes("italic"),s=n.opentype.tables["OS/2"].usWeightClass||"normal",c=!!n.opentype.tables.fvar,m=c&&n.opentype.tables.fvar.axes.find((({tag:e})=>"wght"===e)),u=m?`${m.minValue} ${m.maxValue}`:null,f=c?n.opentype.tables.fvar.axes.reduce(((e,{tag:t,minValue:n,defaultValue:a,maxValue:l})=>(e[t]={tag:t,minValue:n,defaultValue:a,maxValue:l,currentValue:a},e)),{}):{},d={copyright:a.get(0),source:a.get(11),license:a.get(13),licenseURL:a.get(14)};l({file:t,name:r,style:o?"italic":"normal",weight:m?u:s,variable:c,fontCredits:d}),i(f)}}},accept:".otf, .ttf, .woff, .woff2"}),(0,e.createElement)("small",null,(0,t.__)(".otf, .ttf, .woff, .woff2 file extensions supported","dragblock"))),(0,e.createElement)("h4",null,(0,t.__)("Font face definition for this font file:","dragblock")),(0,e.createElement)("div",{className:"form-group"},(0,e.createElement)(n.__experimentalInputControl,{label:(0,t.__)("Font name:","dragblock"),type:"text",name:"font-name",id:"font-name",placeholder:(0,t.__)("Font name","dragblock"),value:a.name||"",onChange:e=>l({...a,name:e})})),(0,e.createElement)("div",{className:"form-group"},(0,e.createElement)(n.SelectControl,{label:(0,t.__)("Font style:","dragblock"),name:"font-style",id:"font-style",value:a.style||"",onChange:e=>l({...a,style:e})},(0,e.createElement)("option",{value:"normal"},"Normal"),(0,e.createElement)("option",{value:"italic"},"Italic"))),(0,e.createElement)("div",{className:"form-group"},(0,e.createElement)(n.__experimentalInputControl,{label:(0,t.__)("Font weight:","dragblock"),type:"text",name:"font-weight",id:"font-weight",placeholder:(0,t.__)("Font weight:","dragblock"),value:a.weight||"",onChange:e=>l({...a,weight:e})})),a.variable&&(0,e.createElement)("input",{type:"hidden",name:"font-variation-settings",value:c})),(0,e.createElement)(n.Button,{variant:"primary",type:"submit",disabled:!o(),form:"font-upload-form"},(0,t.__)("Upload Font","dragblock")))};const ue={file:null,name:null,weight:null,style:null};var fe=function(){const[n,a]=(0,e.useState)(ue),[l,r]=(0,e.useState)({}),o=()=>n.file&&n.name&&n.weight&&n.style;return(0,e.useEffect)((()=>{(async()=>{if(!o())return;const e=await n.file.arrayBuffer();new FontFace(n.name,e,{style:n.style,weight:n.weight}).load().then((function(e){document.fonts.add(e)})).catch((function(e){console.error(e)}))})()}),[n]),(0,e.createElement)("div",{className:"layout"},(0,e.createElement)("main",null,(0,e.createElement)("header",null,(0,e.createElement)(oe,null),(0,e.createElement)("h1",null,(0,t.__)("Upload Local Fonts","dragblock")),(0,e.createElement)("p",null,(0,t.__)("Add local fonts assets and font face definitions to the DragBlock's font library","dragblock"))),(0,e.createElement)(me,{isFormValid:o,formData:n,setFormData:a,resetFormData:()=>{a(ue)},setAxes:r})),(0,e.createElement)("div",{className:"preview"},(0,e.createElement)("h2",null,(0,t.__)("Font file preview","dragblock")),o()?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(E,{axes:l,setAxes:r,resetAxes:()=>{const e=Object.keys(l).reduce(((e,t)=>(e[t]={...l[t],currentValue:l[t].defaultValue},e)),{});r(e)}}),(0,e.createElement)("p",null,(0,t.__)("Demo:","dragblock")),(0,e.createElement)(u,{style:(()=>{if(!o())return{};const e={fontFamily:n.name,fontWeight:n.weight,fontStyle:n.style};return n.variable&&(e.fontVariationSettings=ce(l)),e})()})):(0,e.createElement)("p",null,(0,t.__)("Load a font file to preview it.","dragblock"))))};function de(){const t=new URLSearchParams(document.location.search).get("page"),{adminUrl:n,fontLibSlug:a}=dragBlockFontLib;let l=null;switch(t){case a:l=N;break;case"dragblock-add-google-fonts":l=se;break;case"dragblock-add-local-fonts":l=fe;break;default:l=()=>(0,e.createElement)("h1",null,"This page is not implemented yet.")}return(0,e.createElement)(m,null,(0,e.createElement)(l,null))}window.addEventListener("load",(function(){const t=document.querySelector("#dragblock-font-library-app");void 0===e.createRoot?(0,e.render)((0,e.createElement)(de,null),t):(0,e.createRoot)(t).render((0,e.createElement)(de,null))}),!1)}()}();